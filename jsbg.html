<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="b.js"></script>
</head>
<style>
body { 
    width: 100%;
    height: 100%;
    margin: 0;
    box-sizing: border-box;
    background-color: #333;
    }
canvas {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
}
</style>
<body>
    <canvas id="canvas"></canvas>
</body>

<script>

let canvas, ctx
var intver
let sidelen = 50
let arr1 = [] 

function init() {
    canvas = document.querySelector("#canvas")
    ctx = canvas.getContext("2d")

    let w, h
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight

    reSize()
    
}

function reSize() {
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight

    draw(canvas.width, canvas.height)
}


function drawHexagon(string, x, y, size, color) {
    const canvas = document.getElementById("canvas")
    let ctx = canvas.getContext(string)
    let side = 0
    ctx.beginPath()
    ctx.moveTo(x + size * Math.cos(0),y + size * Math.sin(0))
    for (side; side<7;side++) {
        ctx.lineTo(x + size * Math.cos(side * 2 * Math.PI/6),y + size * Math.sin(side * 2 * Math.PI / 6))
    }
    ctx.lineWidth = "3"
    ctx.strokeStyle = color
    ctx.stroke()
}




function draw(width, height) {
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    for (let i = 0; i<width+100;i+=150) {
        for (let j = 0; j<height+100;j+=43) {
            drawHexagon("2d", i, j*2, sidelen, randomColour())
            drawHexagon("2d", i+75, j*2+44, sidelen, randomColour())
            
            arr1.push([i,  j*2])
            arr1.push([i+75, j*2+44])
        }
    }
}


function randomColour() {
    let r = mathRnd(50,250)
    let g = mathRnd(50,250)
    let b = mathRnd(50,250)
    let col = "rgb("+ r + "," + g + "," + b +",0.5)"
    return col 
}


function mouseMove(e) {
    let x = e.clientX
    let y = e.clientY
    
    for (let i = 0; i< arr1.length; i++) {
        redrawHexagon(x,y,arr1[i])
    }
}

function redrawHexagon(x,y,arr) {
    let arr_x = arr[0]
    let arr_y = arr[1]

    function intervalFunc() {
        drawHexagon("2d", arr_x, arr_y, sidelen, randomColour())
    }

    if ((inRangeValue(x,arr_x) && inRangeValue(y,arr_y) == true)) {
        drawHexagon("2d", arr_x, arr_y, sidelen, "white")
        
        intver = setTimeout(intervalFunc, 1000)
    }
}



function inRangeValue(coord, arrval) {
    // mouse X bubble
    let offset = 40
    if (arrval+offset > coord && arrval-offset < coord) {
        return true
    } else {
        return false
    }
}

function mathRnd(min, max) {
    let s = Math.floor(Math.random() * max-min)
    return s
}

window.addEventListener("DOMContentLoaded", init)
window.addEventListener("resize", reSize)
window.addEventListener("mousemove", mouseMove)



// ease back/fade color of redrawn hexagons
//      use interval to turn back to orignal color
//      set original color per page reload


// what is possible to do with canvas:
//      animation to change color of hexagons
//      use screen width % to find center point and make gradient



</script>
</html>
